import pandas as pd
import math
import numpy as np
from matplotlib import pyplot as plt
import collections
from statistics import mode

url="https://raw.githubusercontent.com/AbhiRuchiK/Statistics/master/diabetic_data.csv"
s=requests.get(url).content
AllData=pd.read_csv(io.StringIO(s.decode('utf-8')))

TrainingData = AllData[0:int(0.75*len(AllData))]
TestingData = AllData[(int(0.75*len(AllData))):]
Age = list(TrainingData.AgeMean)

AgeMode = mode(Age) #natural parameter

def PdfRayleigh(x):
    return ((x/(AgeMode**2))*math.e**(-(x**2)/(2*(AgeMode**2))))

def PdfNon_Rayleigh(UserAge):
    return (1-PdfRayleigh(UserAge))

UserAge = int(input("Enter your age: "))

#Bayes Classifier
diabetesMed = list(TrainingData.diabetesMed)
diabetesMedProb = ((diabetesMed.count(1))/len(diabetesMed))
non_diabetesMedProb = (1-diabetesMedProb)

a = PdfRayleigh(UserAge)*diabetesMedProb
b = a + PdfNon_Rayleigh(UserAge)*non_diabetesMedProb
BayesClassifier = a/b

print(BayesClassifier,"BAyes")
AgeProb=0
AgeProb = ((Age.count(UserAge))/len(Age))
print(AgeProb)
